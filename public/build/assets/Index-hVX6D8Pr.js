import{r as n,j as e,y as A,a as E,d as b}from"./app-zR8_T5Oq.js";import{F as P,a as I}from"./index-qsiQr_AR.js";import{u as S}from"./Permissions-Vypp2XvS.js";import{M as U,D as R}from"./index-uoB8b8dF.js";import{D as j,a as f,b as y,c as v}from"./DialogContentText-_lEJ180G.js";import{M as x}from"./Paper-H0D-987Z.js";import{I as M}from"./autoprefixer-ETYLMFa9.js";import{A as O}from"./AuthenticatedLayout-GTo-H2NV.js";import{P as L}from"./PencilIcon-SqTGM67a.js";import"./iconBase-OeDdW9ao.js";import"./extends-z9a7DBh-.js";import"./Typography-qW6Y3iqi.js";import"./transition-5pInOOcg.js";import"./use-is-mounted-Ikp7_Pn9.js";import"./logosite-2IKUHq9V.js";const T=({user:a})=>{const[l,s]=n.useState(!1),{hasRole:d,hasPermission:m}=S(),o=()=>{s(!0)},c=()=>{s(!1)},u=async()=>{await A.visit(route("manage-users.show",a.id),{}),console.log("Item deleted"),s(!1)};return e.jsxs(e.Fragment,{children:[m("deleteUsers")?e.jsx(e.Fragment,{children:e.jsx("button",{className:` bg-indigo-500    text-white active:bg-indigo-600
text-xs font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none  mb-1 ease-linear transition-all duration-150
`,onClick:o,children:a.is_active===1?e.jsxs("spam",{className:"flex gap-3",children:["Desactiver",e.jsx(U,{className:"h-4 w-4 text-red-600 cursor-pointer"})]}):e.jsxs("spam",{className:"flex gap-3",children:["Activer",e.jsx(P,{className:"h-4 w-4 text-green-600 cursor-pointer"})]})})}):e.jsx(e.Fragment,{children:e.jsxs("button",{className:` bg-gray-500    text-white active:bg-indigo-600
text-xs font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none  mb-1 ease-linear transition-all duration-150
`,children:[e.jsx(I,{className:"h-4 w-4  cursor-pointer"})," "]})}),e.jsxs(j,{open:l,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(R,{id:"alert-dialog-title",children:"Confirmer la desactivation"}),e.jsx(f,{children:e.jsx(y,{id:"alert-dialog-description",children:a.is_active===1?"Êtes-vous sûr de vouloir désactiver cet utilisateur ?":"Êtes-vous sûr de vouloir activer cet utilisateur ?"})}),e.jsxs(v,{children:[e.jsx(x,{onClick:c,color:"primary",children:"Annuler"}),e.jsx(x,{onClick:u,color:"success",autoFocus:!0,children:"oui"})]})]})]})},_=({userId:a})=>{const[l,s]=n.useState(!1),[d,m]=n.useState([]),[o,c]=n.useState([]),[u,w]=n.useState([]);n.useState([]);const k=r=>{const t=r.target.value;c(i=>i.includes(t)?i.filter(h=>h!==t):[...i,t])},N=async r=>{console.log("userrrrr",r);try{const t=await axios.get(route("getRole"),{params:{userId:r}}),i=t.data.permissions,h=t.data.items.permissions;m(i),console.log("permissions",i);const D=i.map(p=>p.name),F=h.map(p=>p.name);w(i),c(F),console.log("permissionNames",D),s(!0)}catch(t){console.error("Error fetching archives:",t)}};async function C(r){r.preventDefault();try{const t=await axios.post(route("editRole"),{permissions:o,userId:a});await s(!1)}catch(t){console.error("Error fetching archives:",t)}}const g=()=>{console.log("permissionNames",o),s(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(M,{className:" h-6 w-6 ",onClick:async()=>await N(a)}),e.jsxs(j,{open:l,onClose:g,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(f,{children:e.jsxs(y,{id:"alert-dialog-description",children:[e.jsx("h3",{className:"mb-4 font-semibold text-gray-900 ",children:"Privileges"}),e.jsx("ul",{className:"w-48 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:d&&e.jsx(e.Fragment,{children:d.map((r,t)=>e.jsx("li",{className:"w-full border-b border-gray-200 rounded-t-lg dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center ps-3",children:[e.jsx("input",{id:`vue-checkbox-${t}`,type:"checkbox",value:r.name,onChange:k,checked:o.includes(r.name),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500"}),e.jsx("label",{htmlFor:`vue-checkbox-${t}`,className:"w-full py-3 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:r.name})]})},t))})})]})}),e.jsxs(v,{children:[e.jsx(x,{onClick:g,children:"Annuler"}),e.jsx(x,{onClick:C,autoFocus:!0,children:"Enregistrer"})]})]})]})},se=({auth:a,users:l})=>(n.useEffect(()=>{console.log(l)},[]),e.jsx(e.Fragment,{children:e.jsxs(O,{user:a.user,header:e.jsx("h2",{className:"font-semibold text-xl text-center text-gray-800 leading-tight",children:"Liste des Super Admins"}),children:[e.jsx(E,{title:"Liste des Admin"}),e.jsx("div",{className:"py-12 px-2",children:e.jsx("div",{className:"p-4  sm:p-8 bg-white shadow sm:rounded-lg",children:e.jsx("div",{class:"flex justify-center w-full mb-8 overflow-hidden rounded-lg ",children:e.jsxs("div",{class:"w-4/5 overflow-x-auto",children:[e.jsx("div",{className:" w-full flex justify-end my-6",children:e.jsx(b,{href:route("manage-superadmin.create"),className:" w-32 bg-slate-500 text-center p-2 rounded hover:bg-slate-400",children:"Add"})}),e.jsxs("table",{class:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{class:"text-md font-semibold tracking-wide text-left text-gray-900 bg-gray-100 uppercase border-b border-gray-600",children:[e.jsx("th",{class:"px-4 py-3",children:"ID"}),e.jsx("th",{class:"px-4 py-3",children:"Username"}),e.jsx("th",{class:"px-4 py-3",children:"Firstname"}),e.jsx("th",{class:"px-4 py-3",children:"Lastname"}),e.jsx("th",{class:"px-4 py-3",children:"Email"}),e.jsx("th",{class:"px-4 py-3",children:"Privileges"}),e.jsx("th",{class:"px-4 py-3",children:"Action"})]})}),e.jsx("tbody",{class:"bg-white",children:l.map((s,d)=>e.jsxs("tr",{class:"text-gray-700",children:[e.jsx("td",{class:"px-4 py-3 border",children:e.jsx("div",{class:"flex items-center text-sm",children:e.jsx("div",{children:e.jsx("p",{class:"font-semibold text-black",children:s.id})})})}),e.jsx("td",{class:"px-4 py-3 text-ms font-semibold border",children:s.name}),e.jsx("td",{class:"px-4 py-3 text-ms font-semibold border",children:s.firstname}),e.jsx("td",{class:"px-4 py-3 text-ms font-semibold border",children:s.lastname}),e.jsx("td",{class:"px-4 py-3 text-ms font-semibold border",children:s.email}),e.jsx("td",{class:"px-4 py-3 text-ms font-semibold border",children:e.jsx("div",{className:" flex justify-center",children:e.jsx(_,{userId:s.id})})}),e.jsxs("td",{class:" flex justify-centerflex gap-5 items-center px-4 py-3 text-ms font-semibold border",children:[e.jsxs(b,{href:route("manage-superadmin.edit",s),class:"bg-indigo-500 text-white active:bg-indigo-600 text-xs font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",children:[" ",e.jsx(L,{className:" w-5 h-5"})]}),e.jsx(T,{user:s})]})]}))})]})]})})})})]})}));export{se as default};
