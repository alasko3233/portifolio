import{j as e,d as n,r as o,a as w,b as k}from"./app-zR8_T5Oq.js";import{A as N}from"./AuthenticatedLayout-GTo-H2NV.js";import{I as h,a as m}from"./index-YcL00zh3.js";import S from"./AddUser-WUI6-yvd.js";import A from"./RoleEdit-dHDeRalL.js";import{u as I}from"./Permissions-Vypp2XvS.js";import F from"./Delete-yfMRtPbQ.js";import{P as u}from"./PencilIcon-SqTGM67a.js";import"./transition-5pInOOcg.js";import"./use-is-mounted-Ikp7_Pn9.js";import"./logosite-2IKUHq9V.js";import"./iconBase-OeDdW9ao.js";import"./Paper-H0D-987Z.js";import"./extends-z9a7DBh-.js";import"./MenuItem-3cukZC2L.js";import"./autoprefixer-ETYLMFa9.js";import"./DialogContentText-_lEJ180G.js";import"./Typography-qW6Y3iqi.js";import"./index-qsiQr_AR.js";import"./index-uoB8b8dF.js";const C=({links:x,prev:i,next:d})=>{const p=x.slice(1,-1);return e.jsx("div",{class:"flex justify-center items-center mt-2",children:e.jsxs("nav",{class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[i===null?e.jsxs(n,{preserveScroll:!0,href:"#",class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[e.jsx("span",{class:"sr-only",children:"Previous"}),e.jsx(h,{className:" w-6 h-6"})]}):e.jsxs(n,{preserveScroll:!0,href:i,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[e.jsx("span",{class:"sr-only",children:"Previous"}),e.jsx(h,{className:" w-6 h-6"})]}),p.map(l=>e.jsx(n,{preserveScroll:!0,href:l.active?"#":l.url,className:`relative inline-flex items-center px-4 py-2 border border-gray-300 font-medium text-gray-700 hover:bg-gray-50 ${l.active?"bg-blue-400 border-t border-b border-indigo-400":"bg-white border border-gray-300"}`,children:l.label},l.label)),d===null?e.jsxs(n,{preserveScroll:!0,href:"#",class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[e.jsx("span",{class:"sr-only",children:"Next"}),e.jsx(m,{className:" h-6 w-6"})]}):e.jsxs(n,{preserveScroll:!0,href:d,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[e.jsx("span",{class:"sr-only",children:"Next"}),e.jsx(m,{className:" h-6 w-6"})]})]})})},Z=({auth:x,users:i,roles:d,departements:p,agences:l,employes:E,queryParams:t=null})=>{t=t||{},o.useState(null);const[a,g]=o.useState(i);o.useState(!1);const[f,j]=o.useState(""),{hasRole:L,hasPermission:b}=I(),c=(s,r)=>{r?t[s]=r:delete t[s],console.log("searchFieldChanged",t),console.log("query",r),v(t)},y=s=>{const r=s.target.value;j(r),c("name",s.target.value)},v=async s=>{console.log("Effectuer une recherche avec la requÃªte :",s);try{const r=await k.get(route("usersearch"),{params:s});console.log(r),g(r.data.items)}catch(r){console.error("Error fetching archives:",r)}};return o.useEffect(()=>{console.log("query router",i)},[]),e.jsx(e.Fragment,{children:e.jsxs(N,{user:x.user,header:e.jsx("h2",{className:"font-semibold text-xl text-center text-gray-800 leading-tight",children:"Liste des Utilisateurs"}),children:[e.jsx(w,{title:"Liste des Archives"}),e.jsx("div",{class:"flex justify-center w-full mb-1 overflow-hidden rounded-lg ",children:e.jsx("div",{className:" w-4/5  bg-white p-3  flex flex-wrap justify-end items-center content-center my-2",children:e.jsx(S,{})})}),e.jsx("div",{class:"flex justify-center w-full mb-1 overflow-hidden rounded-lg ",children:e.jsxs("div",{class:"w-4/5 overflow-x-auto",children:[e.jsxs("div",{className:" bg-white  flex justify-between p-2",children:[e.jsxs("div",{className:" flex gap-1",children:[e.jsx("div",{children:e.jsxs("select",{id:"agences",name:"agences",class:"w-full h-10 border-2 border-sky-500 focus:outline-none focus:border-sky-500 text-sky-500 rounded px-2 md:px-3 py-0 md:py-1 tracking-wider",defaultValue:t.agences,onChange:s=>c("agences",s.target.value),children:[e.jsx("option",{value:"tous",selected:"",children:"Tous les agences"}),l.map(s=>e.jsx("option",{value:s.id,children:s.name}))]})}),e.jsx("div",{children:e.jsxs("select",{id:"departement",name:"departement",class:"w-full h-10 border-2 border-sky-500 focus:outline-none focus:border-sky-500 text-sky-500 rounded px-2 md:px-3 py-0 md:py-1 tracking-wider",defaultValue:t.departement,onChange:s=>c("departement",s.target.value),children:[e.jsx("option",{value:"tous",selected:"",children:"Tous les departements"}),p.map(s=>e.jsx("option",{value:s.id,children:s.name}))]})}),e.jsx("div",{children:e.jsxs("select",{id:"roles",name:"roles",class:"w-full h-10 border-2 border-sky-500 focus:outline-none focus:border-sky-500 text-sky-500 rounded px-2 md:px-3 py-0 md:py-1 tracking-wider",defaultValue:t.roles,onChange:s=>c("roles",s.target.value),children:[e.jsx("option",{value:"tous",selected:"",children:"Tous les Roles"}),d.map(s=>e.jsx("option",{value:s.name,children:s.name}))]})})]}),e.jsx("div",{children:e.jsx("div",{class:"relative text-gray-600 mx-2 self-center",children:e.jsx("input",{type:"search",name:"search",value:f,onChange:y,placeholder:"Search",className:"bg-white border-sky-500 focus:outline-none focus:border-sky-500 h-8 px-5 pr-10 rounded-full text-sm"})})})]}),e.jsxs("table",{class:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{class:"text-md font-semibold tracking-wide text-left text-gray-900 bg-gray-300 uppercase border-b border-gray-600",children:[e.jsx("th",{class:"px-4 py-3",children:"ID"}),e.jsx("th",{class:"px-4 py-3",children:"Username"}),e.jsx("th",{class:"px-4 py-3",children:"Firstname"}),e.jsx("th",{class:"px-4 py-3",children:"Lastname"}),e.jsx("th",{class:"px-4 py-3",children:"Agence"}),e.jsx("th",{class:"px-4 py-3",children:"Departement"}),e.jsx("th",{class:"px-4 py-3",children:"Privileges"}),e.jsx("th",{class:"px-4 py-3",children:"Action"})]})}),a&&e.jsx("tbody",{class:"bg-white",children:a.data.map((s,r)=>e.jsxs("tr",{class:"text-gray-700",children:[e.jsx("td",{class:"px-4 py-3 border",children:e.jsxs("div",{class:"flex items-center text-sm",children:[e.jsxs("div",{class:"relative w-8 h-8 mr-3 rounded-full md:block",children:[e.jsx("img",{class:"object-cover w-full h-full rounded-full",src:"https://images.pexels.com/photos/5212324/pexels-photo-5212324.jpeg?auto=compress&cs=tinysrgb&dpr=3&h=750&w=1260",alt:"",loading:"lazy"}),e.jsx("div",{class:"absolute inset-0 rounded-full shadow-inner","aria-hidden":"true"})]}),e.jsx("div",{children:e.jsx("p",{class:"font-semibold text-black",children:s.email})})]})}),e.jsx("td",{class:"px-4 py-3 text-ms font-semibold border",children:s.name}),e.jsx("td",{class:"px-4 py-3 text-ms font-semibold border",children:s.firstname}),e.jsx("td",{class:"px-4 py-3 text-xs border",children:e.jsxs("span",{class:"px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-sm",children:[" ",s.lastname," "]})}),e.jsx("td",{class:"px-4 py-3 text-xs border",children:e.jsx("span",{class:"px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-sm",children:s.agence?s.agence.name:"N/A"})}),e.jsx("td",{class:"px-4 py-3 text-xs border",children:e.jsx("span",{class:"px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-sm",children:s.departement?s.departement.name:"N/A"})}),e.jsx("td",{class:"px-4 py-3 text-xs text-center justify-center border",children:e.jsx("div",{className:" flex justify-center",children:e.jsx(A,{userId:s.id})})}),e.jsxs("td",{class:" flex justify-centerflex gap-5 items-center px-4 py-3 text-ms font-semibold border",children:[b("modify employe")?e.jsx(e.Fragment,{children:e.jsxs(n,{href:route("manage-chefd.edit",s),class:"bg-indigo-500 text-white active:bg-indigo-600 text-xs font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",children:[" ",e.jsx(u,{className:" w-5 h-5"})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{class:"bg-indigo-500 text-white active:bg-indigo-600 text-xs font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button",children:[" ",e.jsx(u,{className:" w-5 h-5"})]})}),e.jsx(F,{user:s})]})]}))})]}),e.jsx(C,{links:a.links,prev:a.prev_page_url,next:a.next_page_url})]})})]})})};export{Z as default};
