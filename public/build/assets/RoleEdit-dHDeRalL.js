import{r as o,j as e}from"./app-zR8_T5Oq.js";import{I as w}from"./autoprefixer-ETYLMFa9.js";import{D as C,a as N,b as v,c as D}from"./DialogContentText-_lEJ180G.js";import{M as u}from"./Paper-H0D-987Z.js";import"./iconBase-OeDdW9ao.js";import"./extends-z9a7DBh-.js";import"./Typography-qW6Y3iqi.js";const M=({userId:c})=>{const[h,t]=o.useState(!1),[d,p]=o.useState([]),[n,m]=o.useState([]),[E,x]=o.useState([]);o.useState([]);const b=r=>{const s=r.target.value;m(a=>a.includes(s)?a.filter(i=>i!==s):[...a,s])},f=async r=>{console.log("userrrrr",r);try{const s=await axios.get(route("getRole"),{params:{userId:r}}),a=s.data.permissions,i=s.data.items.permissions;p(a),console.log("permissions",a);const k=a.map(l=>l.name),j=i.map(l=>l.name);x(a),m(j),console.log("permissionNames",k),t(!0)}catch(s){console.error("Error fetching archives:",s)}};async function y(r){r.preventDefault();try{const s=await axios.post(route("editRole"),{permissions:n,userId:c});await t(!1)}catch(s){console.error("Error fetching archives:",s)}}const g=()=>{console.log("permissionNames",n),t(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(w,{className:" h-6 w-6 ",onClick:async()=>await f(c)}),e.jsxs(C,{open:h,onClose:g,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(N,{children:e.jsxs(v,{id:"alert-dialog-description",children:[e.jsx("h3",{className:"mb-4 font-semibold text-gray-900 ",children:"Privileges"}),e.jsx("ul",{className:"w-48 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:d&&e.jsx(e.Fragment,{children:d.map((r,s)=>e.jsx("li",{className:"w-full border-b border-gray-200 rounded-t-lg dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center ps-3",children:[e.jsx("input",{id:`vue-checkbox-${s}`,type:"checkbox",value:r.name,onChange:b,checked:n.includes(r.name),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500"}),e.jsx("label",{htmlFor:`vue-checkbox-${s}`,className:"w-full py-3 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:r.name})]})},s))})})]})}),e.jsxs(D,{children:[e.jsx(u,{onClick:g,children:"Annuler"}),e.jsx(u,{onClick:y,autoFocus:!0,children:"Enregistrer"})]})]})]})};export{M as default};
